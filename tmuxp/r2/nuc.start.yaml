session_name: r2_nuc_start

# Add commands to bash history
suppress_history: true

start_directory: /home/$USER/deploy_ws/src/

# commands to run before panes startup
# add 'r2.nuc.local.start.xsens' if using xsens outside of docker
before_script: "
  ./deployer -s
    r2.nuc.docker.remove
    r2.nuc.launch.start"

# This is where we list all the stuff we want to run
windows:
  - window_name: bluetooth and xsens
    focus: false
    layout: tiled
    panes:
      # launch the recorder
      - shell_command:
        - ssh ugv2@ugv2
        - ssh nuc@nuc
        # - docker-join
        - tmux a -t launch_rosbag
      # launch the xsens on the robot directly
      - shell_command:
        - ssh ugv2@ugv2
        - ssh nuc@nuc
        - tmux a -t wifi-bluetooth
      - shell_command:
        - ssh ugv2@ugv2
        - ssh nuc@nuc
        - tmux a -t map-resender
  
  ### misc state estimation ###
  - window_name: main
    focus: true
    layout: main-horizontal
    panes:
      # LOAM (outside docker launch)
      - shell_command:  
        - ssh ugv2@ugv2
        - ssh nuc@nuc
        - tmux a -t loam
      # enter the docker container on nuc
      - shell_command:  
        - ssh ugv2@ugv2
        - ssh nuc@nuc
        - tmux a -t launch_planning
      - shell_command:
        - ssh ugv2@ugv2
        - ssh nuc@nuc
        - tmux a -t launch_state_est
      
  - window_name: docker shell
    focus: false
    layout: main-horizontal
    panes:
      # enter the docker container on planning-pc
      - shell_command:
        - ssh ugv2@ugv2
        - ssh nuc@nuc
        - tmux a -t ros_shell
